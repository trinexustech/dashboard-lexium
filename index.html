<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lexium AI | Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // --- HELPER COMPONENTS (ICONS) ---
        const DashboardIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></svg>
        );
        const DocumentIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></svg>
        );
        const AuditIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/><path d="m6 19-2 2 4-4 2 2-4 4"/></svg>
        );
        const SettingsIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
        );
        const LogoutIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
        );


        // --- CHART COMPONENTS ---
        const ComplianceDonutChart = () => {
            const chartRef = useRef(null);
            useEffect(() => {
                const chartInstance = new Chart(chartRef.current, {
                    type: 'doughnut',
                    data: {
                        labels: ['Compliant', 'Needs Review'],
                        datasets: [{ data: [96, 4], backgroundColor: ['#2563EB', '#374151'], borderColor: '#111827', borderWidth: 4, hoverOffset: 4 }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, cutout: '80%', plugins: { legend: { display: false }, tooltip: { enabled: false } } }
                });
                return () => chartInstance.destroy();
            }, []);
            return (
                <div className="relative w-40 h-40">
                    <canvas ref={chartRef}></canvas>
                    <div className="absolute inset-0 flex items-center justify-center">
                        <div className="text-center">
                            <span className="text-4xl font-bold text-white">96%</span>
                            <span className="block text-xs text-slate-400 -mt-1">Compliance</span>
                        </div>
                    </div>
                </div>
            );
        };

        const ComplianceTrendChart = () => {
            const chartRef = useRef(null);
            useEffect(() => {
                const ctx = chartRef.current.getContext('2d');
                const gradient = ctx.createLinearGradient(0, 0, 0, 80);
                gradient.addColorStop(0, 'rgba(37, 99, 235, 0.5)');
                gradient.addColorStop(1, 'rgba(37, 99, 235, 0)');
                const chartInstance = new Chart(chartRef.current, {
                    type: 'line',
                    data: {
                        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                        datasets: [{ data: [92, 94, 93, 96], borderColor: '#2563EB', borderWidth: 2, pointRadius: 0, tension: 0.4, fill: true, backgroundColor: gradient }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false, min: 90, max: 100 } } }
                });
                return () => chartInstance.destroy();
            }, []);
            return (<div className="w-48 h-20"><canvas ref={chartRef}></canvas></div>);
        };
        
        // --- AUTHENTICATION & DASHBOARD COMPONENTS ---
        const LoginPrompt = ({ onLogin }) => (
            <div className="flex flex-col items-center justify-center min-h-screen text-center text-white p-4">
                <h1 className="text-4xl font-bold">Access Denied</h1>
                <p className="text-slate-400 mt-2">Please log in via our main website to access your dashboard.</p>
                {/* UPDATED: Link to the new homepage URL */}
                <a href="https://trinexustech.github.io/lexium" className="mt-6 bg-blue-600 text-white px-6 py-3 rounded-md font-semibold hover:bg-blue-500 transition-colors">Return to Homepage</a>
                <div className="mt-8 border-t border-slate-700 pt-6 text-sm text-slate-500">
                    <p>For MVP demonstration purposes only:</p>
                    <button onClick={onLogin} className="mt-2 text-blue-400 underline hover:text-blue-300">Simulate Login</button>
                </div>
            </div>
        );

        // --- NEW: Placeholder Components for fake navigation ---
        const PlaceholderView = ({ title, message }) => (
            <div>
                 <header className="flex justify-between items-start mb-8">
                    <div>
                        <h1 className="text-3xl font-bold text-white">{title}</h1>
                        <p className="text-slate-400 mt-1">{message}</p>
                    </div>
                </header>
                <div className="bg-[#0D1117] border border-slate-800 rounded-xl p-16 text-center">
                    <h2 className="text-xl font-semibold text-white">Feature Coming Soon</h2>
                    <p className="text-slate-400 mt-2">This area is currently under development. Check back later for updates!</p>
                </div>
            </div>
        );

        const MainDashboardView = ({userEmail}) => {
            const [documents, setDocuments] = useState([
                { id: 1, name: 'Privacy Policy', status: 'Active', score: 98, lastAudit: 'Sep 15, 2025', owner: 'You' },
                { id: 2, name: 'AI Usage Policy', status: 'Needs Review', score: 85, lastAudit: 'Sep 15, 2025', owner: 'You' },
                { id: 3, name: 'Record of Processing Activities (ROPA)', status: 'Draft', score: null, lastAudit: 'N/A', owner: 'You' },
                { id: 4, name: 'Data Processing Agreement - Standard', status: 'Active', score: 100, lastAudit: 'Sep 12, 2025', owner: 'You' },
            ]);
            const [notification, setNotification] = useState('');

            const getStatusChip = (status) => {
                switch (status) {
                    case 'Active': return <span className="bg-green-500/10 text-green-400 text-xs font-medium px-2.5 py-1 rounded-full">‚úÖ Active</span>;
                    case 'Needs Review': return <span className="bg-yellow-500/10 text-yellow-400 text-xs font-medium px-2.5 py-1 rounded-full">‚ö†Ô∏è Needs Review</span>;
                    case 'Draft': return <span className="bg-slate-500/10 text-slate-400 text-xs font-medium px-2.5 py-1 rounded-full">üìù Draft</span>;
                    default: return null;
                }
            };
            
            const getComplianceBar = (score) => {
              if (score === null) return <span className="text-slate-500">-</span>;
              const width = `${score}%`;
              let colorClass = score < 90 ? 'bg-yellow-500' : (score >= 98 ? 'bg-green-500' : 'bg-blue-500');
              return (
                <div className="flex items-center gap-2">
                  <div className="w-24 bg-slate-700 rounded-full h-2"><div className={`${colorClass} h-2 rounded-full`} style={{ width }}></div></div>
                  <span className="text-sm text-white font-medium">{score}%</span>
                </div>
              );
            };

            const showNotification = (message) => {
                setNotification(message);
                setTimeout(() => setNotification(''), 3000);
            };

            return (
                <div>
                    {notification && (
                        <div className="fixed top-5 right-5 bg-blue-600 text-white text-sm font-semibold px-4 py-2 rounded-md shadow-lg transition-opacity duration-300">
                            {notification}
                        </div>
                    )}
                    <header className="flex justify-between items-start mb-8">
                        <div>
                            <h1 className="text-3xl font-bold text-white">Dashboard</h1>
                            {/* UPDATED: Personalized welcome message */}
                            <p className="text-slate-400 mt-1">Welcome back, {userEmail || "user"}! Here's your compliance overview.</p>
                        </div>
                        <div className="flex items-center gap-6 bg-[#0D1117] border border-slate-800 p-4 rounded-xl">
                           <ComplianceDonutChart />
                           <div className="border-l border-slate-700 h-24"></div>
                           <div>
                               <h3 className="text-sm font-semibold text-white mb-1">Compliance Trend</h3>
                               <p className="text-xs text-slate-400 mb-2">Last 4 Weeks</p>
                               <ComplianceTrendChart/>
                           </div>
                        </div>
                    </header>
                    
                    <div className="bg-[#0D1117] border border-slate-800 rounded-xl">
                        <div className="p-6 flex justify-between items-center border-b border-slate-800">
                          <h2 className="text-lg font-semibold text-white">Your Compliance Documents</h2>
                          <button onClick={() => showNotification("AI Document Generation Initialized...")} className="bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-blue-500 transition-colors">Generate New Document</button>
                        </div>
                        
                        <table className="w-full text-left">
                            <thead className="border-b border-slate-800"><tr className="text-xs text-slate-400 uppercase"><th className="p-4 font-semibold">Document Name</th><th className="p-4 font-semibold">Status</th><th className="p-4 font-semibold">Compliance Score</th><th className="p-4 font-semibold">Last Audit</th><th className="p-4 font-semibold">Owner</th><th className="p-4 font-semibold">Actions</th></tr></thead>
                            <tbody>
                                {documents.map(doc => (
                                    <tr key={doc.id} className="border-b border-slate-800 last:border-b-0 hover:bg-slate-800/20">
                                        <td className="p-4 text-sm font-medium text-white">{doc.name}</td>
                                        <td className="p-4">{getStatusChip(doc.status)}</td>
                                        <td className="p-4">{getComplianceBar(doc.score)}</td>
                                        <td className="p-4 text-sm">{doc.lastAudit}</td>
                                        <td className="p-4 text-sm">{doc.owner}</td>
                                        <td className="p-4">
                                            <div className="flex gap-2">
                                                <button onClick={() => showNotification(`Loading ${doc.name}...`)} className="text-xs text-slate-300 hover:text-white font-semibold">View</button>
                                                <button onClick={() => showNotification(`Starting audit for ${doc.name}...`)} className="text-xs text-blue-400 hover:text-blue-300 font-semibold">{doc.status === 'Needs Review' ? 'Review' : 'Audit Now'}</button>
                                            </div>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        };

        const DashboardContainer = ({ userEmail, onLogout }) => {
            // --- NEW: State for managing the current view ---
            const [activeView, setActiveView] = useState('dashboard');

            const renderView = () => {
                switch (activeView) {
                    case 'dashboard':
                        return <MainDashboardView userEmail={userEmail} />;
                    case 'documents':
                        return <PlaceholderView title="Documents" message="Manage all your generated legal documents here." />;
                    case 'audits':
                         return <PlaceholderView title="Audit Reports" message="View and export your weekly compliance audit reports." />;
                    case 'settings':
                         return <PlaceholderView title="Company Profile" message="Manage your company details and subscription." />;
                    default:
                        return <MainDashboardView userEmail={userEmail} />;
                }
            };
            
            const NavLink = ({ viewName, children, icon }) => (
              <button
                onClick={() => setActiveView(viewName)}
                className={`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors ${activeView === viewName ? 'bg-slate-800 text-white' : 'text-slate-400 hover:bg-slate-800 hover:text-white'}`}
              >
                {icon}
                <span className="font-semibold text-sm">{children}</span>
              </button>
            );

            return (
                <div className="bg-slate-900 text-slate-300 min-h-screen flex font-sans">
                    <aside className="w-64 bg-[#0D1117] p-6 flex flex-col justify-between border-r border-slate-800">
                        <div>
                            <div className="flex items-center space-x-2.5 mb-10">
                                <div className="w-7 h-7 flex flex-col justify-between">
                                    <div className="h-2 w-full bg-sky-400 rounded-full"></div>
                                    <div className="h-2 w-2/3 bg-blue-600 rounded-full self-end"></div>
                                    <div className="h-2 w-full bg-sky-400 rounded-full"></div>
                                </div>
                                <span className="font-bold text-xl text-white">Lexium AI</span>
                            </div>
                            <nav className="space-y-2">
                                <NavLink viewName="dashboard" icon={<DashboardIcon />}>Dashboard</NavLink>
                                <NavLink viewName="documents" icon={<DocumentIcon />}>Documents</NavLink>
                                <NavLink viewName="audits" icon={<AuditIcon />}>Audit Reports</NavLink>
                            </nav>
                        </div>
                        <nav className="space-y-2">
                           <NavLink viewName="settings" icon={<SettingsIcon />}>Company Profile</NavLink>
                            <button onClick={onLogout} className="w-full flex items-center gap-3 px-3 py-2.5 text-slate-400 hover:bg-slate-800 hover:text-white rounded-lg"><LogoutIcon /><span className="font-semibold text-sm">Logout</span></button>
                        </nav>
                    </aside>

                    <main className="flex-1 p-8">
                        {renderView()}
                    </main>
                </div>
            );
        };

        const App = () => {
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [userEmail, setUserEmail] = useState('');

            useEffect(() => {
                const token = localStorage.getItem('lexium-auth-token');
                const email = localStorage.getItem('lexium-user-email');
                if (token) {
                    setIsAuthenticated(true);
                    setUserEmail(email || 'user@example.com');
                }
            }, []);

            const handleLogin = () => {
                const fakeAuthToken = 'user-logged-in-token-' + Date.now();
                const fakeEmail = 'test-user@lexium.ai';
                localStorage.setItem('lexium-auth-token', fakeAuthToken);
                localStorage.setItem('lexium-user-email', fakeEmail);
                setIsAuthenticated(true);
                setUserEmail(fakeEmail);
            };

            const handleLogout = () => {
                localStorage.removeItem('lexium-auth-token');
                localStorage.removeItem('lexium-user-email');
                setIsAuthenticated(false);
                setUserEmail('');
            };

            if (!isAuthenticated) {
                return <LoginPrompt onLogin={handleLogin} />;
            }
            
            return <DashboardContainer userEmail={userEmail} onLogout={handleLogout} />;
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>

